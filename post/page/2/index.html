<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Ckryo - 技术栈， 分享各类新奇有趣、科技、技术、开发，各类互联网优质精选文章以及优秀开源项目； -- by Ckryo。">
    <meta name="keywords" content="Ckryo, php, laravel, vue, iview, ios, 全栈工程师, 创业" />
    <meta name="author" content="Ckryo">
    <link rel="icon" href="/favicon.ico">
    <!-- page title -->
    <title>Ckryo - 技术栈</title>
    <!-- bootstrap css -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
    <!-- css -->
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/animate.css" rel="stylesheet">
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- fonts -->
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='/fonts/FontAwesome.otf' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/linear-icons.css">
    <link rel="stylesheet" href="/css/share.min.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="/https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="/https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
    <!-- javascript -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.easing.min.js"></script>
</head>
<body data-spy="scroll" data-target="#post-scroll-spy">
    <!-- preloader -->
    <div id="preloader">
        <div class="spinner spinner-round"></div>
    </div>
    <!-- / preloader -->
    <!-- header -->
    <header>
        <!-- nav -->
        <nav class="navbar navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-logo" href="/index.html">
                        Ckryo
                    </a>
                </div>
                <!-- / navbar-header -->
                
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                    	
                        <li>
	                        <a href="/">
	                        	
	                        		<i class="fa fa-"></i>
	                        	
	                        	<span>首页</span>
	                        </a>
                        </li>
                        
                        <li>
	                        <a href="/project/index.html">
	                        	
	                        		<i class="fa fa-"></i>
	                        	
	                        	<span>项目</span>
	                        </a>
                        </li>
                        
                        <li>
	                        <a href="/post/index.html">
	                        	
	                        		<i class="fa fa-"></i>
	                        	
	                        	<span>文章</span>
	                        </a>
                        </li>
                        
                        <li>
	                        <a href="/about.html">
	                        	
	                        		<i class="fa fa-"></i>
	                        	
	                        	<span>关于我</span>
	                        </a>
                        </li>
                        
                        <li>
	                        <a href="/project/2016/04/28/hexo-minimal.html">
	                        	
	                        		<i class="fa fa-tachometer"></i>
	                        	
	                        	<span>Minimal</span>
	                        </a>
                        </li>
                        
                    </ul>
                </div>
                
                <!--/ nav-collapse -->
            <!-- / container -->
        </nav>
        <!-- / nav -->
        <!-- header-banner -->
        <div id="header-banner" class="demo-1"  style="background-image: url(/images/banner-bg.jpg)" >
    <div class="banner-content text-center">
        <div class="banner-info">
            <h1 id="banner-title">Ckryo - 技术栈</h1>
            <p id="banner-description" style="display: none" data-in-effect="rotateInUpRight">
                优秀技术资源分享
            </p>
        </div>
        <!-- / banner-info -->
    </div>
    <!-- / banner-content -->
</div>
        <!-- / header-banner -->
    </header>
    <!-- / header -->
    <!-- / content -->
    <!-- content -->
<link rel="stylesheet" href="/css/i_slidebar.css">
<link rel="stylesheet" href="/css/i_post.css">
<div id="page-content" class="container">
    <!-- blog content + sidebar -->
    <section>
        <div class="row">
            <!-- blog content area -->
            <div class="col-sm-8 col-md-9">
            	

    
        <article class="post-item">
            <div class="blog block post-content-area">
                
                <div class="post-info-box">
                    <a href="2016/08/18/JS-我待this如初见/"><h1>JS-我待this如初见</h1></a>
                    <div class="post-meta">
                      <span class="post-date">2016.08</span>
                      <a href="#" class="post-author">
                        
                            -
                        
                      </a>
                    </div>
                    <div style="max-height: 350px; overflow: hidden; line-height: 24px">
                        何为this？this是对象，是在运行时基于函数的执行环境(和对象有关)绑定的，首先，当代码没执行前，或没执行到之前，this 是没有指向的,所以切记：在函数中this到底取何值，是在函数真正被调用执行的时候确定的，函数定义的时候确定不了。因为this的取值是执行上下文环境的一部分，每次调用函数，都会产生一个新的执行上下文环境。this只要一出现，一定牵扯到函数和对象一般方法：首先分析this所在的函数是被当做哪个对象的方法调用的，则该对象就是this所引用的对象。
其实，this的取值，分五种情况。我们来挨个看一下。


全局和调用普通函数
构造函数
函数作为对象的一个属性
函数用call或apply或bind
事件监听函数中的this


情况1：全局 &amp; 调用普通函数在全局环境下，this永远是window，这个应该没有非议。123console.log(this==window);//turethis.a=20;console.log(window.a);
普通函数在调用时，其中的this也都是window。
1234567var home=&quot;中国&quot;;var person=function()&#123;		var home=&quot;河南&quot;		console.log(this);  //window		console.log(this.home);  //中国  &#125;person();
但是严格模式下 this是undefined(竞然)：12345678910function person1()&#123;	return this;        &#125;person1()===window;   //truefunction person2()&#123;	&quot;use strict&quot;  //严格模式	return this;&#125;person2()===undefined;        //true
情况2：构造函数所谓构造函数就是用来new对象的函数。其实严格来说，所有的函数都可以new一个对象，但是有些函数的定义是为了new一个对象，而有些函数则不是。另外注意，构造函数的函数名第一个字母大写（规则约定）。例如：Object、Array、Function等。
如果函数作为构造函数用，那么其中的this就代表它即将new出来的对象
1234567891011121314window.home=&quot;中国&quot;;window.age=&quot;5000+&quot;;function Person()&#123;	this.home=&quot;河南&quot;;	this.age=20;	console.log(this);   //Person &#123;home: &quot;河南&quot;, age: 20&#125;	console.log(this.home);//  河南&#125;var chongqing = new Person();console.log(chongqing.home);  //河南还是中国console.log(chongqing.age);  //20还是5000+console.log(age);  //5000+还是20
以上代码中，如果函数作为构造函数用，那么其中的this就代表它即将new出来的对象,即上文中的chongqing。
上个例子中构造函数没有返回值，默认返回this，但是若有返回语句，返回一个对象的话，会将return的对象作为返回值12345678910111213function Myclass()&#123;	this.a=20;&#125;var o=new Myclass();console.log(o.a);   //20function Person()&#123;	this.a=20;	return &#123;  a: 21&#125;;&#125;var o=new Person();console.log(o.a);   //21还是20
注意，以上仅限new Person()的情况，即Person函数作为构造函数的情况。如果直接调用Person函数，而不是new Person()，情况就大不一样了。相当于普通函数1234567891011window.home=&quot;中国&quot;;window.age=&quot;5000+&quot;;function Person()&#123;	this.home=&quot;河南&quot;;	this.age=20;	console.log(this);   //window 还是Person &#123;home: &quot;河南&quot;, age: 20&#125;	console.log(this.home);//???河南还是中国	console.log(home);//???河南还是中国&#125;Person();
这种情况下this是window，就是相当于普通函数中的this
构造函数还有一种情况，在构造函数的prototype中，this代表着什么？在整个原型链中，this代表的是当前对象的值1234567891011121314window.home=&quot;中国&quot;;window.age=&quot;5000+&quot;;function Person()&#123;	this.home=&quot;河南&quot;;	this.age=20;	console.log(this);   //Person &#123;home: &quot;河南&quot;, age: 20&#125;&#125;Person.prototype.getHome=function()&#123;	console.log(this.home);  //河南&#125;var chongqing= new Person();chongqing.getHome();//
如上代码，在Person.prototype.getHome函数中，this指向的是chongqing对象。因此可以通过this.name获取chongqing.name的值。
其实，不仅仅是构造函数的prototype，即便是在整个原型链中，this代表的也都是当前对象的值。
情况3：函数作为对象的一个方法在这又分两种情况：

函数作为对象的方法被调用,此时函数中的this指向该对象
函数被赋值到了另一个变量中，this的值是window

###1. 如果函数作为对象的一个方法时，并且作为对象的一个方法被调用时，函数中的this指向该对象。1234567891011window.home=&quot;中国&quot;;window.age=&quot;5000+&quot;;var obj=&#123;	home:&quot;河南&quot;,	person: function()&#123;		console.log(this);  //Object &#123;home: &quot;河南&quot;&#125;		console.log(this.home);  //河南    &#125;&#125;;obj.person();
以上代码中，person不仅作为一个对象的一个方法，而且的确是作为对象的一个方法被调用。结果this就是obj对象。
注意，如果person函数不作为obj的一个方法被调用，会是什么结果呢？
2. 如果person函数被赋值到了另一个变量中，并没有作为obj的一个方法被调用，那么this的值就是window1234567891011window.home=&quot;中国&quot;;window.age=&quot;5000+&quot;;var obj=&#123;	home:&quot;河南&quot;,	person: function()&#123;		console.log(this);  //？？window还是object		console.log(this.home);  //？？中国还是河南    &#125;&#125;;var person1=obj.person;person1();
如上代码，如果person函数被赋值到了另一个变量中，并没有作为obj的一个属性被调用，那么this的值就是window,相当于全局了，this.home的值为中国
3.闭包中使用this对象（对象方法函数中又有一个匿名函数）-this用处（诡异） 在ES3中，此时使用this比较糟糕，因为this失去了方向，引用的是window对象，而不是定义函数所在的对象,欣慰的是，this在ES5中是固定的，我们应该清楚地了解这种情况注意： 在ES3中，当函数作为某个对象的方法调用时，this等于那个对象，不过在闭包中，匿名函数的执行环境具有全局性，此时通常this指向window1234567891011var obj=&#123;	home:&quot;河南&quot;,	person: function()&#123;		    function person1()&#123;			console.log(this);      //window			console.log(this.home);    //undefined        &#125;        person1();&#125;&#125;;obj.person();
总结：当this值的宿主环境被封装在另一个函数内部或在另一个函数的上下文被调用时，this将永远是对window对象的引用（再次说明，this在ES5中是固定的）
如何改变上述情况呢？可以在父函数中使用作用域链来保留对this的引用，以使this值不丢失。如下代码演示了如何使用that变量及其作用域来有效跟踪函数上下文12345678910111213var obj=&#123;	home:&quot;河南&quot;,	person: function()&#123;	        var that=this;  //person作用域中，保存this引用对象obj（而不是window）		    function person1()&#123;		      //输出通过作用域得到河南，因为that=this			console.log(that);      //Object &#123;home: &quot;河南&quot;&#125;			console.log(that.home);    //河南        &#125;        person1();&#125;&#125;;obj.person();
情况4：函数用call或者apply或bind调用
先简单说一下call和apply和bind如何使用

call(),apply()
关于call和apply，首先这两个方法的用途都是在特定的作用域中调用函数，，都有两个参数call/apply(作用域，传递给函数的参数)
它的作用是改变函数的调用对象，它的第一个参数就表示改变后的调用这个函数的对象。因此，this指的就是这第一个参数。 

apply的用法和call大致相同，只有一点区别，apply只接受两个参数，第一个参数和call相同，第二个参数必须是一个数组，数组中的元素对应的就是函数的形参。注意不同的是接受参数的方式不同，call()传递给函数的参数必须逐个列举出来，而apply()则是参数数组



bind()
bind（）创造一个函数的实例，其this值会被绑定到传给bind（）函数的值。

牢记：当一个函数被call或apply或bind调用时，this的值就取传入的对象的值,即call（）或apply或bind（）括号里的对象。
call实例12345678910window.home=&quot;中国&quot;;window.age=&quot;5000+&quot;;var obj=&#123;	home:&quot;河南&quot;&#125;;var person=function()&#123;		console.log(this);  //Object &#123;home: &quot;河南&quot;&#125;		console.log(this.home);  //河南  &#125;person.call(obj);

还要注意：apply()的参数为空时，默认调用全局对象。

123456789　　var x = 0; 　　function test()&#123; 　　　　alert(this.x); 　　&#125; 　　var o=&#123;&#125;; 　　o.x = 1; 　　o.m = test; 　　o.m.apply(); //0
bind()实例12345678window.color=&quot;red&quot;;var o=&#123;color:&quot;blue&quot;&#125;;function sayColor()&#123;	alert(this.color);&#125;var objectSayColor=sayColor.bind(o);objectSayColor();    //blue还是red
sayColor()调用bind（）并传入对象o。创建了objectSaycolor（）函数，objectSaycolor（）函数中的this的值等于o，因此，即使是在全局作用域中调用这个函数也会看到“blue”。
情况5：事件监听函数中的this(大家应该熟悉)12345var one = document.getElementByIdx( &apos;one&apos; );one.onclick = function()&#123;    alert( this.innerHTML );  //this指向的是one元素，
友情链接：Javascript高级程序设计（第3版）-关于this对象-182页JavaScript启示录-this部分博客-深入理解Js-this博客-js中this慕课网Javascript深入浅出-this部分博客-this关键字详解
Ending（欲知后事如何，且听下回分解）
                    </div>
                    <div class="blog-post-footer">
                        <a href="2016/08/18/JS-我待this如初见/" class="btn btn-primary-filled"><span>阅读全文</span><i class="fa fa-long-arrow-right"></i></a>
                        <div class="pull-right">
                            
                                <a href="#" class="post-tag">JavaScript</a>
                            
                        </div>
                    </div>
                    <!-- / blog-post-footer -->
                </div>
                <!-- / post-info-box -->
            </div>
            <!-- / blog-block -->
        </article>
        <div class="space-50">&nbsp;</div>
        <!-- / col-sm-8 col-md-9 -->
    

            </div><!-- / col-sm-8 col-md-9 -->
            <!-- / blog content area -->
            <!-- blog sidebar area -->
            <div class="col-sm-4 col-md-3 blog-sidebar">
                <div class="blog block post-sidebar-widget">
    <img class="site-author-image" src="/images/avatar.gif">
    <p class="site-author-name">Ckryo</p>
    <p class="site-author-description">曾担任 微阿里（北京）科技有限公司 、微阿里（北京）品牌管理有限公司 CEO 、沈阳盾盾科技有限公司 创始人 之一， 曾从事过 VB，Andorid，PHP，Node，H5 项目开发，现主要从事Swift开发，从swift1.2开始使用swift代替其他语言进行完整的项目开发，精通IOS开发，拥有Mac软件开发经验，目前正在利用swift进行服务端开发...</p>
    <!-- <div class="feed-link motion-element">
                        <a href="/atom.xml" rel="alternate">
                            <i class="fa fa-rss"></i> RSS
                        </a>
                    </div> -->
    <nav class="site-state motion-element">
        <div class="site-state-item site-state-posts">
            <a href="/archives">
                <!-- 计算文章 和 项目总数量 -->
                
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">文章</span>
            </a>
        </div>
        <div class="site-state-item site-state-categories">
            <a href="/categories">
	            <span class="site-state-item-count">0</span>
	            <span class="site-state-item-name">项目</span>
            </a>
        </div>
    </nav>
</div>
            </div><!-- / col-sm-4 col-md-3 -->
            <!-- / blog sidebar area -->
        </div><!-- / row -->
    </section>
    <!-- / blog content + sidebar -->

    <!-- pagination -->
    
  <div class="pagination">
    
    	<a href="/post/" class="btn btn-direction btn-default-filled"><i class="fa fa-long-arrow-left"></i><span>上一页</span></a>
    

    
  </div>

    <!-- / pagination -->

</div><!-- / container -->

<!-- / content -->

        <!-- / content -->
</body>
<!-- footer -->
<footer>
    <div class="container">
        <p class="footer-info">© Made by Ckryo</p>
    </div>
    <!-- / container -->
</footer>
<!-- / footer -->
<!-- portfolio -->
<script src="/js/custom.js"></script>
<script src="/js/jquery.shuffle.min.js"></script>
<!-- lightbox -->
<script src="/js/jquery.magnific-popup.min.js"></script>
<!-- / lightbox -->
<!-- / portfolio -->
<!-- preloader -->
<script src="/js/preloader.js"></script>
<!-- / preloader -->
<!-- / javascript -->
<script src="/js/jquery.lettering.js"></script>
<script src="/js/jquery.textillate.js"></script>
<script>
$(function() {
    $('#banner-title').textillate({
        in: {
            // set the effect name
            effect: 'fadeInDown',
            callback: function() {
                $('#banner-description').css('display', 'block');
                $('#banner-description').textillate();
            }
        },
        // set the type of token to animate (available types: 'char' and 'word')
        type: 'char'
    });
});
</script>
</html>